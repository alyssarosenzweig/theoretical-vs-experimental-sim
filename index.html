<h1> Theoretical vs Experimental Probability Simulator </h1>

<script src="Experiment.js"></script>
<script src="Theoretical.js"></script>
<script src="Chart.min.js"></script>

<script>
var theoretical = new Theoretical();
theoretical.addSimple(6);

var experimental = new Experiment(theoretical, 1000000);

var IDEAL_WIDTH = 25;

function start() {
	run(experimental);
}

function run(e) {
	var devianceLabels = [];
	var devianceData = [];
	var experimentalLabels = [];
	var experimentalData = [];

	while(!e.isDone()) {
		e.iterateRun(Math.round(e.trials / IDEAL_WIDTH));

		devianceLabels.push(e.iterations);
		devianceData.push(e.deviance());

		experimentalLabels.push(e.iterations);
		experimentalData.push(e.experimentalProbability());
	}

	document.getElementById('theoretical').innerHTML = e.expected();
	document.getElementById('experimental').innerHTML = e.experimentalProbability();
	document.getElementById('deviance').innerHTML = e.deviance();


	graph('deviance', devianceLabels, devianceData);
	graph('experimental', experimentalLabels, experimentalData);

	document.getElementById('results').style.display = 'block';
}

function graph(id, labels, data) {
	new Chart(
		document.getElementById(id+"Graph").getContext('2d')
	).Line({
		labels: labels,
		datasets: [{
			fillColor: "rgba(220,220,220,0.2)",
            strokeColor: "rgba(220,220,220,1)",
            pointColor: "rgba(220,220,220,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: data
		}]
	});
}

</script>

<div id="parameters">
	<h1>Simulation Parematers:</h1>
	<h3>Components:</h3>
	<input type="submit" onclick="addComponent(false)" value="+ (simple)"/>
	<input type="submit" onclick="addComponent(true)" value="+ (complex"/> 
	<br/>
	<input type="submit" onclick="start()" value="Run!"/>
</div>

<div id="results" style="display: none">
	<h1>Info:</h1>
	<h2>Theoretical Probability: <span id="theoretical">0</span></h2>
	<h2>Experimental Probability: <span id="experimental">0</span></h2>
	<h2>Deviance: <span id="deviance">0</span></h2>
	<h1>Graphs:</h1>
	<h2>Experimental Probability over time:</h2> <br/> <canvas id="experimentalGraph" width="400" height="400"></canvas>
	<h2>Deviance over time:</h2> <br/> <canvas id="devianceGraph" width="400" height="400"></canvas>
</div>